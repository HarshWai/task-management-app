<div class="container mt-4">
    <nav class="navbar navbar-expand-lg shadow-sm"
        [ngClass]="isDarkMode ? 'navbar-dark bg-dark' : 'navbar-light bg-light'">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Task Manager</a>
            <div class="form-check form-switch ms-auto">
                <input class="form-check-input" type="checkbox"
                    id="darkModeToggle" (change)="toggleDarkMode($event)">
                <label class="form-check-label" for="darkModeToggle">Dark
                    Mode</label>
            </div>
        </div>
    </nav>

    <h2 class="text-center">{{ task.id ? 'Edit Task' : 'Create Task' }}</h2>

    <form #taskForm="ngForm" (ngSubmit)="onSubmit(taskForm)"
        class="p-4 border rounded shadow bg-white">

        <div class="row g-3">
            <!-- Task Title -->
            <div class="col-md-6">
                <label class="form-label">Task Title</label>
                <input type="text" class="form-control" [(ngModel)]="task.title"
                    name="title" required
                    #title="ngModel"
                    [class.is-invalid]="(title.invalid && (title.touched || submitted))"
                    placeholder="Enter task title">
                <div class="text-danger"
                    *ngIf="title.invalid && (title.touched || submitted)">Task
                    title is required.</div>
            </div>

            <!-- Assigned To -->
            <div class="col-md-6">
                <label class="form-label">Assigned To</label>
                <input type="text" class="form-control"
                    [(ngModel)]="task.assignedTo" name="assignedTo" required
                    #assignedTo="ngModel"
                    [class.is-invalid]="(assignedTo.invalid && (assignedTo.touched || submitted))"
                    placeholder="Enter assignee name">
                <div class="text-danger"
                    *ngIf="assignedTo.invalid && (assignedTo.touched || submitted)">Assignee
                    name is required.</div>
            </div>
        </div>

        <div class="row g-3 mt-2">
            <!-- Status -->
            <div class="col-md-6">
                <label class="form-label">Status</label>
                <select class="form-select" [(ngModel)]="task.status"
                    name="status" required #status="ngModel"
                    [class.is-invalid]="(status.invalid && (status.touched || submitted))">
                    <option value>Select status</option>
                    <option value="Pending">Pending</option>
                    <option value="In Progress">In Progress</option>
                    <option value="Completed">Completed</option>
                </select>
                <div class="text-danger"
                    *ngIf="status.invalid && (status.touched || submitted)">Status
                    is required.</div>
            </div>

            <!-- Estimated Time -->
            <div class="col-md-6">
                <label class="form-label">Estimated Time</label>
                <input type="time" class="form-control"
                    [(ngModel)]="task.estimatedTime"
                    name="estimatedTime"
                    required
                    #estimatedTime="ngModel"
                    [class.is-invalid]="(estimatedTime.invalid && (estimatedTime.touched || submitted))">
                <div class="text-danger"
                    *ngIf="estimatedTime.invalid && (estimatedTime.touched || submitted)">
                    Estimated time is required.
                </div>
            </div>
        </div>

        <div class="row g-3 mt-2">
            <!-- Time Spent -->
            <div class="col-md-6">
                <label class="form-label">Time Spent</label>
                <input type="time" class="form-control"
                    [(ngModel)]="task.timeSpent"
                    name="timeSpent"
                    required
                    #timeSpent="ngModel"
                    [class.is-invalid]="(timeSpent.invalid && (timeSpent.touched || submitted))">
                <div class="text-danger"
                    *ngIf="timeSpent.invalid && (timeSpent.touched || submitted)">
                    Time spent is required.
                </div>
            </div>

            <!-- Deadline -->
            <div class="col-md-6">
                <label class="form-label">Deadline</label>
                <input type="date" class="form-control"
                    [(ngModel)]="task.deadline" name="deadline" required
                    #deadline="ngModel"
                    [class.is-invalid]="(deadline.invalid && (deadline.touched || submitted))">
                <div class="text-danger"
                    *ngIf="deadline.invalid && (deadline.touched || submitted)">Deadline
                    is required.</div>
            </div>
        </div>

        <div class="text-center mt-4">
            <button type="submit" class="btn btn-primary">
                {{ task.id ? 'Update Task' : 'Add Task' }}
            </button>
        </div>
    </form>
</div>
